os: Visual Studio 2015

environment:
  matrix:
    - channel: stable
      target: x86_64-pc-windows-msvc
    - channel: nightly
      target: x86_64-pc-windows-msvc

install:
  - ps: Get-WmiObject -Class win32_operatingSystem 
  - ps: Get-WmiObject -Class Win32_processor
  #- cmd: cinst gnupg-modern
  - ps: Invoke-WebRequest -Uri 'https://gnupg.org/ftp/gcrypt/binary/gnupg-w32-2.2.7_20180502.exe' -OutFile $env:appveyor_build_folder/gnupg.exe
  - ls
  - ps: Invoke-Command -ScriptBlock {$env:appveyor_build_folder/gnupg.exe /S /v /qn}
  - appveyor DownloadFile https://win.rustup.rs/ -FileName rustup-init.exe
  - rustup-init -yv --default-toolchain %channel% --default-host %target%
  - set PATH=%PATH%;%USERPROFILE%\.cargo\bin
  - rustc -vV
  - cargo -vV

build: false

test_script:
  - cargo test
